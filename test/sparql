<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Virtuoso SPARQL Query Form</title>
		<style type="text/css">
		label.n { display: inline; margin-top: 10pt; }
		body { font-family: arial, helvetica, sans-serif; font-size: 9pt; color: #234; }
		fieldset { border: 2px solid #86b9d9; }
		legend { font-size: 12pt; color: #86b9d9; }
		label { font-weight: bold; }
		h1 { width: 100%; background-color: #86b9d9; font-size: 18pt; font-weight: normal; color: #fff; height: 4ex; text-align: right; vertical-align: middle; padding-right:  8px; }
		textarea { width: 100%; padding: 3px; }
		</style>
		<script language="JavaScript">
var last_format = 1;
function format_select(query_obg)
{
  var query = query_obg.value; 
  var format = query_obg.form.format;

  if ((query.match(/construct/i) || query.match(/describe/i)) && last_format == 1) {
    for(var i = format.options.length; i > 0; i--)
      format.options[i] = null;    format.options[1] = new Option('N3/Turtle','text/rdf+n3');
    format.options[2] = new Option('JSON','application/rdf+json');
    format.options[3] = new Option('RDF/XML','application/rdf+xml');
    format.options[4] = new Option('NTriples','text/plain');
    format.options[5] = new Option('XHTML+RDFa','application/xhtml+xml');
    format.selectedIndex = 1;
    last_format = 2;
  }

  if (!(query.match(/construct/i) || query.match(/describe/i)) && last_format == 2) {
    for(var i = format.options.length; i > 0; i--)
      format.options[i] = null;
    format.options[1] = new Option('HTML','text/html');
    format.options[2] = new Option('Spreadsheet','application/vnd.ms-excel');
    format.options[3] = new Option('XML','application/sparql-results+xml');
    format.options[4] = new Option('JSON','application/sparql-results+json');
    format.options[5] = new Option('Javascript','application/javascript');
    format.options[6] = new Option('N3/Turtle','text/rdf+n3');
    format.options[7] = new Option('RDF/XML','application/rdf+xml');
    format.options[8] = new Option('NTriples','text/plain');
    format.selectedIndex = 1;
    last_format = 1;
  }
}
		</script>
	</head>
	<body>
		<div id="header">
			<h1>OpenLink Virtuoso SPARQL Query</h1>
		</div>
		<div id="main">
			<p>This query page is designed to help you test OpenLink Virtuoso SPARQL protocol endpoint. <br/>
			Consult the <a href="http://virtuoso.openlinksw.com/wiki/main/Main/VOSSparqlProtocol">Virtuoso Wiki page</a> describing the service 
			or the <a href="http://docs.openlinksw.com/virtuoso/">Online Virtuoso Documentation</a> section <a href="http://docs.openlinksw.com/virtuoso/rdfandsparql.html">RDF Database and SPARQL</a>.</p>
			<p>There is also a rich Web based user interface with sample queries. 
			In order to use it you must install the iSPARQL package (isparql_dav.vad).</p>
			<form action="" method="GET">
			<fieldset>
			<legend>Query</legend>
			  <label for="default-graph-uri">Default Graph URI</label>
			  <br />
			  <input type="text" name="default-graph-uri" id="default-graph-uri"
				  	value="" size="80"/>
			  <br /><br />
			  <i>Security restrictions of this server do not allow you to retrieve remote RDF data.
DBA may wish to grant "SPARQL_SPONGE" privilege to "SPARQL" account to remove the restriction.
In order to do this, please perform the following steps:</i>
<br />
1. Go to the Virtuoso Administration Conductor i.e. 
http://localhost:8890/conductor
<br />
2. Login as dba user
<br />
3. Go to System Admin->User Accounts->Roles
<br />
4. Click the link "Edit" for "SPARQL_SPONGE"
<br />
5. Select from the list of available user/groups "SPARQL" and click the ">>" button so to add it to the right-positioned list.
<br />
6. Click the button "Update"
<br />
7. Access again the sparql endpoint in order to be able to retrieve remote data.
<br /><br />
			  <label for="query">Query text</label>
			  <br />
			  <textarea rows="10" cols="80" name="query" id="query" onchange="format_select(this)" onkeyup="format_select(this)">select distinct ?Concept where {[] a ?Concept}</textarea>
			  <br /><br />
			  <label for="format" class="n">Display Results As:</label>
			  <select name="format">
			    <option value="auto">Auto</option>
			    <option value="text/html" selected="selected">HTML</option>
			    <option value="application/vnd.ms-excel">Spreadsheet</option>
			    <option value="application/sparql-results+xml">XML</option>
			    <option value="application/sparql-results+json">JSON</option>
			    <option value="application/javascript">Javascript</option>
			    <option value="text/plain">NTriples</option>
			    <option value="application/rdf+xml">RDF/XML</option>
			  </select>
&nbsp;&nbsp;&nbsp;
<input name="debug" type="checkbox" checked/>&nbsp;<label for="debug" class="n"><nobr>Rigorous check of the query</nobr></label>
&nbsp;&nbsp;&nbsp;
<input name="timeout" type="text"0/>&nbsp;<label for="timeout" class="n"><nobr>Execution timeout, in milliseconds, values less than 1000 are ignored</nobr></label>
&nbsp;&nbsp;&nbsp;
			  <input type="submit" value="Run Query"/>&nbsp;<input type="reset" value="Reset"/>
			</fieldset>
			</form>
		</div>
	</body>
</html>
